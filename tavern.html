<div id='tavernView'>

</div>


<canvas id='tavern' width='1400px' height='720px' style='border:1px solid grey'></canvas>
<script>


    var ctx = tavern.getContext('2d');
    ctx.font = '24px Tahoma';
    var tavernBackground = new Image;
    tavernBackground.src = 'images/tavern.png';
   
    var gamblerText = ['Eeey sst, listen to me, for a second. I heared that you are new here, for foreign visitors we have special offer, sit here!',
     'Lets roll some dices, ayeeee'];


   
    ctx.fillStyle = '#3498db';   //inny niebieski
    ctx.fillRect(0, 0, tavern.width,tavern.height);
    ctx.drawImage(tavernBackground,0,0, tavern.width, tavern.height);

   /* var text= "Siehehehema, mo≈ºe piwka?";
    ctx.fillStyle = "indigo";
    ctx.fillText(text, tavern.width/2 - 150, tavern.height/2); */

    var gambler = new Image,
    gambler2 = new Image,
    window = new Image,
    xButton = new Image;
    gambler.src = "images/Gambler1.png";
    gambler2.src = "images/Gambler2.png";
    window.src = "images/window.png";
    xButton.src = "images/closeButton.png";


   /* var gambleNPC = ctx.drawImage(gambler, 600, 300, gambler.width*2, gambler.height*2);*/
   var gamblerHTML = '<img id="' + 'gambler" ' + 'src="images/Gambler1.png"' + ' width="134" ' + 'height="232"  style="position:absolute">',
   poppingWindowHTML = '<div id="poppingWindow"><p id="windowText"> ' + gamblerText[0] + '</p><button id="confirmButton"> confirm </button><img id="xButton' + '" src="images/closeButton.png"><img src=' + '"images/window.png"></div>';
   var tavernDiv = document.getElementById('tavernView');
   tavernDiv.innerHTML += gamblerHTML /*+ '<img src="' + 'images/window.png"' + ' width="133" ' + 'height="333"' + 'style=" position:absolute">'*/; 
  // tavernDiv.innerHTML += poppingWindowHTML;

   var gamblerObj = document.getElementById('gambler'),
   poppingWindowObj = document.getElementById('poppingWindow'),
    closeButtonObj = document.getElementById('xButton');
   
   console.log(gamblerObj);

   function returnToBasicState(){
    gamblerHTML = '<img id="' + 'gambler" ' + 'src="images/Gambler1.png"' + ' width="134" ' + 'height="232"  style="position:absolute">';
        tavernDiv.innerHTML = gamblerHTML;
        console.log('returned');
   }

   function closeWindow(){
    console.log('essa');
        tavernDiv.innerHTML = '';
        tavernDiv.innerHTML += gamblerHTML;
        returnToBasicState();
        document.getElementById('gambler').addEventListener('mouseover', addGambler); 

   };


   function addGambler(){

    gamblerHTML = '<img id="' + 'gambler" ' + 'src="images/Gambler2.png"' + ' width="134" ' + 'height="232"  style="position:absolute">';
        tavernDiv.innerHTML = gamblerHTML;
        //ctx.drawImage(gambler2, 600, 300, gambler.width*2, gambler.height*2);
        console.log('nigu');

            document.getElementById('gambler').addEventListener('click', function(){
        tavernDiv.innerHTML = '';
        tavernDiv.innerHTML += poppingWindowHTML;
        console.log('okienko pojawia sie');

        document.getElementById('xButton').addEventListener('click', closeWindow);
 
    });

   };


   //closeButtonObj.addEventListener('click', closeWindow);
   setInterval(function(){
       if(document.getElementById('gambler') == null){
           console.log('xDD null i chuj');
       } else {
   document.getElementById('gambler').addEventListener('mouseenter', e=>{
       addGambler();
       document.getElementById('gambler').addEventListener('mouseleave', returnToBasicState);
   });
   document.getElementById('gambler').addEventListener('mouseleave', returnToBasicState);
}



 },100/60);

    



   /* gamblerObj.addEventListener('click', function(){
        console.log('klik');
        //ctx.drawImage(window, tavern.width/2 - window.width/2, tavern.height/2 - window.height/2, widnow.width, widnow.height);
        ctx.drawImage(window,0, 0, window.width, window.height);
        ctx.drawImage(xButton, 22, 22, xButton.width, xButton.height);
    });*/

    /*setInterval(function(){
        tavernView.innerHTML = gamblerHTML;
    }, 200);*/



</script>

<style>

    #gambler {
        display: flex;
        margin-left:5%;
        margin-top: 26%;
      
    }

    #tavernView {
        width:1400px;
        height: 720px;
        display: flex;
        align-items:center;
        justify-content: center;
        position: absolute;
    }

    #poppingWindow {
        position: absolute;
        display:flex;
        justify-content: center;
        align-content: flex-end;
        width:1050px;
        height: 650px;
    }

    #poppingWindow .active {
        display: flex;
    }

    #xButton {
        position:absolute;
        width:64px;
        height:64px;
        margin-left: 85%;
        margin-bottom: 10%;
    }

    #xButton:hover {
        opacity:0.7;
    }

    #windowText {
        color:#fff;
        width: 840px;
        margin-top:3%;
        font-size:26px;
        position: absolute;
    }

    #confirmButton {
        position: absolute;
        width: 110px;
        height: 65px;
        margin-top:52%;
        background: url(images/cofirmButton.png) no-repeat;

        color:#fff;

    }

</style>